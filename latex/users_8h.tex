\doxysection{include/users.h File Reference}
\hypertarget{users_8h}{}\label{users_8h}\index{include/users.h@{include/users.h}}


Spécification du gestionnaire d\textquotesingle{}utilisateurs et de leurs sessions.  


{\ttfamily \#include "{}session.\+h"{}}\newline
Include dependency graph for users.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structparty__t}{party\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Structure représentant une partie de jeu. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structuser__s}{user\+\_\+s}}
\item 
struct \mbox{\hyperlink{structusers__t}{users\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Structure globale de gestion des utilisateurs. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{users_8h_a2c2a303621f66761529e598758d7ef34}\label{users_8h_a2c2a303621f66761529e598758d7ef34} 
\#define {\bfseries MAX\+\_\+\+USERS}~16
\begin{DoxyCompactList}\small\item\em Nombre maximal d\textquotesingle{}utilisateurs autorisés sur le serveur. \end{DoxyCompactList}\item 
\Hypertarget{users_8h_ac7c0207aa5a0e10d378be03b68041350}\label{users_8h_ac7c0207aa5a0e10d378be03b68041350} 
\#define {\bfseries MAX\+\_\+\+NAME}~64
\begin{DoxyCompactList}\small\item\em Taille maximale du nom d\textquotesingle{}un utilisateur (incluant le caractère \textquotesingle{}\textbackslash{}0\textquotesingle{}) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{users_8h_a9bf37c88ba4733af2bc0ff3aac83a33a}\label{users_8h_a9bf37c88ba4733af2bc0ff3aac83a33a} 
typedef struct \mbox{\hyperlink{structrequete}{requete}} {\bfseries requete\+\_\+t}
\item 
\Hypertarget{users_8h_a9527d21e9fb38d56745d03a9c22db9d1}\label{users_8h_a9527d21e9fb38d56745d03a9c22db9d1} 
typedef struct \mbox{\hyperlink{structreponse}{reponse}} {\bfseries reponse\+\_\+t}
\item 
\Hypertarget{users_8h_a6f16b4fd25762446eca133c6cb29b0e7}\label{users_8h_a6f16b4fd25762446eca133c6cb29b0e7} 
typedef char {\bfseries name\+\_\+t}\mbox{[}\mbox{\hyperlink{users_8h_ac7c0207aa5a0e10d378be03b68041350}{MAX\+\_\+\+NAME}}\mbox{]}
\begin{DoxyCompactList}\small\item\em Type représentant le nom d\textquotesingle{}un utilisateur. \end{DoxyCompactList}\item 
\Hypertarget{users_8h_aafaf9b42595b32c3a5ec11b913ba11a7}\label{users_8h_aafaf9b42595b32c3a5ec11b913ba11a7} 
typedef struct \mbox{\hyperlink{structuser__s}{user\+\_\+s}} {\bfseries user\+\_\+t}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{users_8h_ae34bfe8f2ae33fd6fb4295636b90ecd7}{afficher\+Users}} (char \texorpdfstring{$\ast$}{*}cde)
\begin{DoxyCompactList}\small\item\em Affiche l\textquotesingle{}état actuel de la table des utilisateurs. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{users_8h_a4013c0def6984f01a5a43fb72212809f}{trouver\+User}} (\mbox{\hyperlink{users_8h_a6f16b4fd25762446eca133c6cb29b0e7}{name\+\_\+t}} nom)
\begin{DoxyCompactList}\small\item\em Recherche un utilisateur à partir de son nom. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{users_8h_a6f074a8e06bf64e74b35872dae63741c}{creer\+User}} (\mbox{\hyperlink{users_8h_a6f16b4fd25762446eca133c6cb29b0e7}{name\+\_\+t}} nom, \mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*}s\+Dial)
\begin{DoxyCompactList}\small\item\em Crée un nouvel utilisateur. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{users_8h_a747f7bf7fe6cc031a4062f12ff7a3971}{identifier\+User}} (\mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*}s\+Dial, \mbox{\hyperlink{structrequete}{requete\+\_\+t}} \texorpdfstring{$\ast$}{*}req)
\begin{DoxyCompactList}\small\item\em Identifie un utilisateur à partir d\textquotesingle{}une requête réseau. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{users_8h_aa6942959e670e167a7da2f8421264600}{deconnecter\+User}} (int ind\+User)
\begin{DoxyCompactList}\small\item\em Déconnecte un utilisateur. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{users_8h_a8f21e63ee6ec50bc38c9323fa6813cf9}{modifier\+Dest}} (int ind\+User, \mbox{\hyperlink{users_8h_a6f16b4fd25762446eca133c6cb29b0e7}{name\+\_\+t}} dest\+Name)
\begin{DoxyCompactList}\small\item\em Définit le destinataire de communication d\textquotesingle{}un utilisateur. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{users_8h_a4a3c34408cc52a3fce38f005b41c219d}{indice\+Dest}} (int ind\+User)
\begin{DoxyCompactList}\small\item\em Récupère l\textquotesingle{}index du destinataire d\textquotesingle{}un utilisateur. \end{DoxyCompactList}\item 
char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{users_8h_a25dad20d785f93a629f6fc554f483140}{name\+User}} (int ind\+User)
\begin{DoxyCompactList}\small\item\em Récupère le nom d\textquotesingle{}un utilisateur. \end{DoxyCompactList}\item 
\mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{users_8h_aca03269c785a082463a03c1368103193}{socket\+User}} (int ind\+User)
\begin{DoxyCompactList}\small\item\em Récupère la socket associée à un utilisateur. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{users_8h_af60ebf32fdc143e278cb6f77fea224f6}{lire\+Users}} (void)
\begin{DoxyCompactList}\small\item\em Charge les utilisateurs depuis le fichier de sauvegarde. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{users_8h_a54fde5d5e12ec9435e08140e8bd9e074}{ecrire\+Users}} (void)
\begin{DoxyCompactList}\small\item\em Sauvegarde les utilisateurs dans le fichier de persistance. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{users_8h_a73db39cf8c8b05d9ad2365c7aa6b72db}{creer\+Partie\+BDD}} (\mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*}s\+Dial, int game\+Port)
\begin{DoxyCompactList}\small\item\em Crée une nouvelle partie et désigne l\textquotesingle{}utilisateur comme hôte. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{users_8h_a51046ff70b7efc1aef9a79688e2d679c}{is\+Full}} (int id\+User)
\begin{DoxyCompactList}\small\item\em Vérifie si une partie est pleine ou invalide. \end{DoxyCompactList}\item 
\Hypertarget{users_8h_aabec45e6f817ddaafcb55b0178a21739}\label{users_8h_aabec45e6f817ddaafcb55b0178a21739} 
int {\bfseries user\+From\+Socket} (\mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*}s\+Dial)
\item 
\Hypertarget{users_8h_ac92fda5e1fab89de58d052412daeefbb}\label{users_8h_ac92fda5e1fab89de58d052412daeefbb} 
void {\bfseries ip\+Port} (\mbox{\hyperlink{structrequete}{requete\+\_\+t}} \texorpdfstring{$\ast$}{*}req, \mbox{\hyperlink{structreponse}{reponse\+\_\+t}} \texorpdfstring{$\ast$}{*}rep)
\item 
\Hypertarget{users_8h_a69be0d5ec2aac9d9549308797f73831e}\label{users_8h_a69be0d5ec2aac9d9549308797f73831e} 
int {\bfseries get\+Nb\+Users} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Spécification du gestionnaire d\textquotesingle{}utilisateurs et de leurs sessions. 

Ce fichier définit les structures de données et les prototypes nécessaires à la gestion des utilisateurs côté serveur \+:
\begin{DoxyItemize}
\item stockage des utilisateurs connectés
\item association utilisateur ↔ socket
\item gestion des destinations de communication
\item gestion des parties (création, nombre de joueurs)
\end{DoxyItemize}

Il est utilisé par les modules serveur responsables de l’authentification, de la communication et de la gestion des parties.

\begin{DoxyAuthor}{Author}
Samir El Khattabi 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
23 Janvier 2026 
\end{DoxyDate}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}


\doxysubsection{Function Documentation}
\Hypertarget{users_8h_ae34bfe8f2ae33fd6fb4295636b90ecd7}\label{users_8h_ae34bfe8f2ae33fd6fb4295636b90ecd7} 
\index{users.h@{users.h}!afficherUsers@{afficherUsers}}
\index{afficherUsers@{afficherUsers}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{afficherUsers()}{afficherUsers()}}
{\footnotesize\ttfamily int afficher\+Users (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{cde }\end{DoxyParamCaption})}



Affiche l\textquotesingle{}état actuel de la table des utilisateurs. 


\begin{DoxyParams}{Parameters}
{\em cde} & Chaîne descriptive indiquant le contexte d\textquotesingle{}appel \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}
\Hypertarget{users_8h_a73db39cf8c8b05d9ad2365c7aa6b72db}\label{users_8h_a73db39cf8c8b05d9ad2365c7aa6b72db} 
\index{users.h@{users.h}!creerPartieBDD@{creerPartieBDD}}
\index{creerPartieBDD@{creerPartieBDD}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{creerPartieBDD()}{creerPartieBDD()}}
{\footnotesize\ttfamily void creer\+Partie\+BDD (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{s\+Dial,  }\item[{int}]{game\+Port }\end{DoxyParamCaption})}



Crée une nouvelle partie et désigne l\textquotesingle{}utilisateur comme hôte. 


\begin{DoxyParams}{Parameters}
{\em s\+Dial} & Socket de l\textquotesingle{}utilisateur créateur \\
\hline
{\em game\+Port} & Port du serveur de jeu créé par l\textquotesingle{}utilisateur \\
\hline
\end{DoxyParams}
\Hypertarget{users_8h_a6f074a8e06bf64e74b35872dae63741c}\label{users_8h_a6f074a8e06bf64e74b35872dae63741c} 
\index{users.h@{users.h}!creerUser@{creerUser}}
\index{creerUser@{creerUser}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{creerUser()}{creerUser()}}
{\footnotesize\ttfamily int creer\+User (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{users_8h_a6f16b4fd25762446eca133c6cb29b0e7}{name\+\_\+t}}}]{nom,  }\item[{\mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{s\+Dial }\end{DoxyParamCaption})}



Crée un nouvel utilisateur. 


\begin{DoxyParams}{Parameters}
{\em nom} & Nom du nouvel utilisateur \\
\hline
{\em s\+Dial} & Socket de dialogue associée \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Index du nouvel utilisateur ou -\/1 si la table est pleine 
\end{DoxyReturn}
\Hypertarget{users_8h_aa6942959e670e167a7da2f8421264600}\label{users_8h_aa6942959e670e167a7da2f8421264600} 
\index{users.h@{users.h}!deconnecterUser@{deconnecterUser}}
\index{deconnecterUser@{deconnecterUser}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{deconnecterUser()}{deconnecterUser()}}
{\footnotesize\ttfamily void deconnecter\+User (\begin{DoxyParamCaption}\item[{int}]{ind\+User }\end{DoxyParamCaption})}



Déconnecte un utilisateur. 

Ferme la socket associée et réinitialise les informations de communication de l\textquotesingle{}utilisateur. 
\begin{DoxyParams}{Parameters}
{\em ind\+User} & Index de l\textquotesingle{}utilisateur à déconnecter \\
\hline
\end{DoxyParams}
\Hypertarget{users_8h_a54fde5d5e12ec9435e08140e8bd9e074}\label{users_8h_a54fde5d5e12ec9435e08140e8bd9e074} 
\index{users.h@{users.h}!ecrireUsers@{ecrireUsers}}
\index{ecrireUsers@{ecrireUsers}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{ecrireUsers()}{ecrireUsers()}}
{\footnotesize\ttfamily void ecrire\+Users (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Sauvegarde les utilisateurs dans le fichier de persistance. 

Les utilisateurs sont écrits dans le fichier "{}users.\+dat"{}. \Hypertarget{users_8h_a747f7bf7fe6cc031a4062f12ff7a3971}\label{users_8h_a747f7bf7fe6cc031a4062f12ff7a3971} 
\index{users.h@{users.h}!identifierUser@{identifierUser}}
\index{identifierUser@{identifierUser}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{identifierUser()}{identifierUser()}}
{\footnotesize\ttfamily int identifier\+User (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{s\+Dial,  }\item[{\mbox{\hyperlink{structrequete}{requete\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{req }\end{DoxyParamCaption})}



Identifie un utilisateur à partir d\textquotesingle{}une requête réseau. 

Si l\textquotesingle{}utilisateur existe déjà, ses informations sont mises à jour. Sinon, un nouvel utilisateur est créé. 
\begin{DoxyParams}{Parameters}
{\em s\+Dial} & Socket sur laquelle la requête est reçue \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Index de l\textquotesingle{}utilisateur identifié ou -\/1 en cas d\textquotesingle{}erreur 
\end{DoxyReturn}
\Hypertarget{users_8h_a4a3c34408cc52a3fce38f005b41c219d}\label{users_8h_a4a3c34408cc52a3fce38f005b41c219d} 
\index{users.h@{users.h}!indiceDest@{indiceDest}}
\index{indiceDest@{indiceDest}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{indiceDest()}{indiceDest()}}
{\footnotesize\ttfamily int indice\+Dest (\begin{DoxyParamCaption}\item[{int}]{ind\+User }\end{DoxyParamCaption})}



Récupère l\textquotesingle{}index du destinataire d\textquotesingle{}un utilisateur. 


\begin{DoxyParams}{Parameters}
{\em ind\+User} & Index de l\textquotesingle{}utilisateur \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Index du destinataire ou -\/1 si aucun 
\end{DoxyReturn}
\Hypertarget{users_8h_a51046ff70b7efc1aef9a79688e2d679c}\label{users_8h_a51046ff70b7efc1aef9a79688e2d679c} 
\index{users.h@{users.h}!isFull@{isFull}}
\index{isFull@{isFull}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{isFull()}{isFull()}}
{\footnotesize\ttfamily int is\+Full (\begin{DoxyParamCaption}\item[{int}]{id\+User }\end{DoxyParamCaption})}



Vérifie si une partie est pleine ou invalide. 


\begin{DoxyParams}{Parameters}
{\em id\+User} & Index de l\textquotesingle{}utilisateur hôte \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 si la partie est pleine ou invalide, 0 sinon 
\end{DoxyReturn}
\Hypertarget{users_8h_af60ebf32fdc143e278cb6f77fea224f6}\label{users_8h_af60ebf32fdc143e278cb6f77fea224f6} 
\index{users.h@{users.h}!lireUsers@{lireUsers}}
\index{lireUsers@{lireUsers}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{lireUsers()}{lireUsers()}}
{\footnotesize\ttfamily void lire\+Users (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Charge les utilisateurs depuis le fichier de sauvegarde. 

Les utilisateurs sont lus depuis le fichier "{}users.\+dat"{}. \Hypertarget{users_8h_a8f21e63ee6ec50bc38c9323fa6813cf9}\label{users_8h_a8f21e63ee6ec50bc38c9323fa6813cf9} 
\index{users.h@{users.h}!modifierDest@{modifierDest}}
\index{modifierDest@{modifierDest}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{modifierDest()}{modifierDest()}}
{\footnotesize\ttfamily void modifier\+Dest (\begin{DoxyParamCaption}\item[{int}]{ind\+User,  }\item[{\mbox{\hyperlink{users_8h_a6f16b4fd25762446eca133c6cb29b0e7}{name\+\_\+t}}}]{dest\+Name }\end{DoxyParamCaption})}



Définit le destinataire de communication d\textquotesingle{}un utilisateur. 


\begin{DoxyParams}{Parameters}
{\em ind\+User} & Index de l\textquotesingle{}utilisateur source \\
\hline
{\em dest\+Name} & Nom de l\textquotesingle{}utilisateur destinataire \\
\hline
\end{DoxyParams}
\Hypertarget{users_8h_a25dad20d785f93a629f6fc554f483140}\label{users_8h_a25dad20d785f93a629f6fc554f483140} 
\index{users.h@{users.h}!nameUser@{nameUser}}
\index{nameUser@{nameUser}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{nameUser()}{nameUser()}}
{\footnotesize\ttfamily char \texorpdfstring{$\ast$}{*} name\+User (\begin{DoxyParamCaption}\item[{int}]{ind\+User }\end{DoxyParamCaption})}



Récupère le nom d\textquotesingle{}un utilisateur. 


\begin{DoxyParams}{Parameters}
{\em ind\+User} & Index de l\textquotesingle{}utilisateur \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointeur vers le nom ou NULL si index invalide 
\end{DoxyReturn}
\Hypertarget{users_8h_aca03269c785a082463a03c1368103193}\label{users_8h_aca03269c785a082463a03c1368103193} 
\index{users.h@{users.h}!socketUser@{socketUser}}
\index{socketUser@{socketUser}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{socketUser()}{socketUser()}}
{\footnotesize\ttfamily \mbox{\hyperlink{session_8h_a5ef0f2ca252f36a0c8d046d2eb67b416}{socket\+\_\+t}} \texorpdfstring{$\ast$}{*} socket\+User (\begin{DoxyParamCaption}\item[{int}]{ind\+User }\end{DoxyParamCaption})}



Récupère la socket associée à un utilisateur. 


\begin{DoxyParams}{Parameters}
{\em ind\+User} & Index de l\textquotesingle{}utilisateur \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointeur vers la socket ou NULL si index invalide 
\end{DoxyReturn}
\Hypertarget{users_8h_a4013c0def6984f01a5a43fb72212809f}\label{users_8h_a4013c0def6984f01a5a43fb72212809f} 
\index{users.h@{users.h}!trouverUser@{trouverUser}}
\index{trouverUser@{trouverUser}!users.h@{users.h}}
\doxysubsubsection{\texorpdfstring{trouverUser()}{trouverUser()}}
{\footnotesize\ttfamily int trouver\+User (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{users_8h_a6f16b4fd25762446eca133c6cb29b0e7}{name\+\_\+t}}}]{nom }\end{DoxyParamCaption})}



Recherche un utilisateur à partir de son nom. 


\begin{DoxyParams}{Parameters}
{\em nom} & Nom de l\textquotesingle{}utilisateur recherché \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Index de l\textquotesingle{}utilisateur dans la table, ou -\/1 s\textquotesingle{}il n\textquotesingle{}existe pas 
\end{DoxyReturn}
