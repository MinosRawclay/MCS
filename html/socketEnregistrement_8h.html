<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Re&#39;Belotte: include/socketEnregistrement.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Re&#39;Belotte<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">projet belotte socket</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">socketEnregistrement.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Declarations for the registration socket server with multi-threading.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="libRepReq_8h_source.html">libRepReq.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for socketEnregistrement.h:</div>
<div class="dyncontent">
<div class="center"><img src="socketEnregistrement_8h__incl.png" border="0" usemap="#ainclude_2socketEnregistrement_8h" alt=""/></div>
</div>
</div>
<p><a href="socketEnregistrement_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afbe765b48fdd147579445b475744b4c1" id="r_afbe765b48fdd147579445b475744b4c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketEnregistrement_8h.html#afbe765b48fdd147579445b475744b4c1">CHECK_ZERO</a>(status,  msg)</td></tr>
<tr class="memdesc:afbe765b48fdd147579445b475744b4c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro to check pthread function return values.  <br /></td></tr>
<tr class="separator:afbe765b48fdd147579445b475744b4c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a721e6788f7a4a55e6dd9c2bacffbf4bb" id="r_a721e6788f7a4a55e6dd9c2bacffbf4bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketEnregistrement_8h.html#a721e6788f7a4a55e6dd9c2bacffbf4bb">IP_HOST</a>&#160;&#160;&#160;&quot;127.0.0.1&quot;</td></tr>
<tr class="memdesc:a721e6788f7a4a55e6dd9c2bacffbf4bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server listening IP address.  <br /></td></tr>
<tr class="separator:a721e6788f7a4a55e6dd9c2bacffbf4bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a614217d263be1fb1a5f76e2ff7be19a2" id="r_a614217d263be1fb1a5f76e2ff7be19a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketEnregistrement_8h.html#a614217d263be1fb1a5f76e2ff7be19a2">PORT</a>&#160;&#160;&#160;50000</td></tr>
<tr class="memdesc:a614217d263be1fb1a5f76e2ff7be19a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server listening port number.  <br /></td></tr>
<tr class="separator:a614217d263be1fb1a5f76e2ff7be19a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:abf45d33e7548cac6cab52775312d78a1" id="r_abf45d33e7548cac6cab52775312d78a1"><td class="memItemLeft" align="right" valign="top">typedef void *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketEnregistrement_8h.html#abf45d33e7548cac6cab52775312d78a1">pFctThread</a>) (void *)</td></tr>
<tr class="memdesc:abf45d33e7548cac6cab52775312d78a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer type for thread functions.  <br /></td></tr>
<tr class="separator:abf45d33e7548cac6cab52775312d78a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4e1cd4baf65fd0f7908b77f6f0a3b240" id="r_a4e1cd4baf65fd0f7908b77f6f0a3b240"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketEnregistrement_8h.html#a4e1cd4baf65fd0f7908b77f6f0a3b240">threadLogic</a> (void *arg)</td></tr>
<tr class="memdesc:a4e1cd4baf65fd0f7908b77f6f0a3b240"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread logic function to handle individual client connections.  <br /></td></tr>
<tr class="separator:a4e1cd4baf65fd0f7908b77f6f0a3b240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe" id="r_a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketEnregistrement_8h.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point of the registration server.  <br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declarations for the registration socket server with multi-threading. </p>
<p>This header file provides the necessary declarations, macros, and includes for implementing a multi-threaded registration server for the Belote game. It defines thread function pointer types, error checking macros, and server configuration constants (IP address and port). The server uses POSIX threads to handle multiple simultaneous client connections independently. </p><dl class="section author"><dt>Author</dt><dd>Breviere Alexandre </dd></dl>
<dl class="section date"><dt>Date</dt><dd>04/02/2026 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afbe765b48fdd147579445b475744b4c1" name="afbe765b48fdd147579445b475744b4c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbe765b48fdd147579445b475744b4c1">&#9670;&#160;</a></span>CHECK_ZERO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHECK_ZERO</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">status, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">if</span> (0 != (status)) { \</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;pthread erreur : %s\n&quot;</span>, msg); \</div>
<div class="line">        exit(EXIT_FAILURE); \</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p>Macro to check pthread function return values. </p>
<p>Verifies that a pthread function returned 0 (success). If the status is non-zero (error), prints an error message to stderr and terminates the program with EXIT_FAILURE.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>Return value from a pthread function to check </td></tr>
    <tr><td class="paramname">msg</td><td>Error message to display if check fails</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This macro is specifically designed for pthread functions that return 0 on success </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Terminates the program on error - use only for critical failures</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><a class="code hl_define" href="socketEnregistrement_8h.html#afbe765b48fdd147579445b475744b4c1">CHECK_ZERO</a>(pthread_create(&amp;thread, NULL, thread_func, arg), <span class="stringliteral">&quot;Failed to create thread&quot;</span>);</div>
<div class="ttc" id="asocketEnregistrement_8h_html_afbe765b48fdd147579445b475744b4c1"><div class="ttname"><a href="socketEnregistrement_8h.html#afbe765b48fdd147579445b475744b4c1">CHECK_ZERO</a></div><div class="ttdeci">#define CHECK_ZERO(status, msg)</div><div class="ttdoc">Macro to check pthread function return values.</div><div class="ttdef"><b>Definition</b> socketEnregistrement.h:55</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a721e6788f7a4a55e6dd9c2bacffbf4bb" name="a721e6788f7a4a55e6dd9c2bacffbf4bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a721e6788f7a4a55e6dd9c2bacffbf4bb">&#9670;&#160;</a></span>IP_HOST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IP_HOST&#160;&#160;&#160;&quot;127.0.0.1&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Server listening IP address. </p>
<p>Defines the IP address on which the server will listen for connections. "0.0.0.0" means the server listens on all available network interfaces. </p>

</div>
</div>
<a id="a614217d263be1fb1a5f76e2ff7be19a2" name="a614217d263be1fb1a5f76e2ff7be19a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a614217d263be1fb1a5f76e2ff7be19a2">&#9670;&#160;</a></span>PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT&#160;&#160;&#160;50000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Server listening port number. </p>
<p>Defines the port number on which the server will listen for client connections. Port 50000 is used for the registration and game management server. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="abf45d33e7548cac6cab52775312d78a1" name="abf45d33e7548cac6cab52775312d78a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf45d33e7548cac6cab52775312d78a1">&#9670;&#160;</a></span>pFctThread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pFctThread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer type for thread functions. </p>
<p>Defines the signature for functions that can be passed to pthread_create(). Thread functions must take a void* argument and return a void* result. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a840291bc02cba5474a4cb46a9b9566fe" name="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main entry point of the registration server. </p>
<p>Initializes and runs a multi-threaded server that handles client registrations. The server creates a listening socket on IP_HOST:PORT and enters an infinite loop that:</p><ul>
<li>Accepts incoming client connections via <a class="el" href="session_8h.html#a1bf8e2cd5daab300c5354e8efaf065c9" title="Accepts a client connection request.">accepterClt()</a></li>
<li>Initializes thread attributes for detached threads</li>
<li>Creates a new detached thread for each client using <a class="el" href="socketEnregistrement_8h.html#a4e1cd4baf65fd0f7908b77f6f0a3b240" title="Thread logic function to handle individual client connections.">threadLogic()</a></li>
</ul>
<p>Each client connection is handled independently in its own thread, allowing multiple simultaneous client registrations and game management.</p>
<dl class="section return"><dt>Returns</dt><dd>Exit status code (never reached due to infinite loop)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The server listens on IP_HOST (0.0.0.0) and PORT (50000) </dd>
<dd>
All threads are created in detached state (PTHREAD_CREATE_DETACHED) </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The infinite loop means the server runs continuously until terminated </dd>
<dd>
Each thread must properly handle its own socket cleanup </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="socketEnregistrement_8h.html#a4e1cd4baf65fd0f7908b77f6f0a3b240" title="Thread logic function to handle individual client connections.">threadLogic()</a> </dd></dl>

</div>
</div>
<a id="a4e1cd4baf65fd0f7908b77f6f0a3b240" name="a4e1cd4baf65fd0f7908b77f6f0a3b240"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e1cd4baf65fd0f7908b77f6f0a3b240">&#9670;&#160;</a></span>threadLogic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * threadLogic </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thread logic function to handle individual client connections. </p>
<p>This function runs in a separate thread for each connected client. It continuously reads messages from the client, processes registration requests via <a class="el" href="libRepReq_8h.html#a8659c391ba60322c5d03c2400722390e" title="Processes registration and game management requests.">traiterRegister()</a>, and sends appropriate responses. The thread performs the following operations in a loop:</p><ul>
<li>Reads incoming data from the client socket</li>
<li>Receives and parses the client's response</li>
<li>Processes the registration request</li>
<li>Sends back the generated request to the client</li>
<li>Logs all requests and responses to stderr</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Pointer to the socket_t structure for client communication </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL when the thread terminates</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The socket is automatically closed when the client disconnects </dd>
<dd>
This function terminates when read() returns 0 or negative value </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function is designed to be called by pthread_create() </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="socketEnregistrement_8h.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main entry point of the registration server.">main()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
